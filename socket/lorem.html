<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />

		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

		<script type="text/javascript" src="http://localhost:8080/socket.io/socket.io.js"></script>
	</head>
	<body>
		<pre id="output"></pre>

		<script type="text/javascript">
			var text ='';
			var socket = io.connect('http://localhost:8080/'); // do not change this line
			socket.on('message', function (data) {
				console.log(data.message);
				var temp = JSON.stringify(data);
				//test = test.replace(/","/gi,'\n');
				var one = data.timestamp;
				var two = data.message;
				console.log(one+' '+two);
				console.log(data);
				text = text +one+': '+two+'\n';
				jQuery('#output').text(text);
				/*
				temp = temp.trim();
				temp = temp.replace(/"timestamp"/gi,'');
				temp = temp.replace(/"message"/gi,'');
				temp = temp.replace(new RegExp('{:','gi'),'');
				temp = temp.replace(new RegExp('}:','gi'),'');
				temp = temp.replace(new RegExp(',','gi'),'');
				temp = temp.replace(new RegExp('','gi'),'');
				temp = temp.slice(0, -1);*/

		//		socket.emit('my other event', { my: 'data' });
			});
			// when receiving a message event from the server, append the timestamp and the message to the output element
			// for example, it should append '123: test\n' when receiving { 'timestamp':123, 'message':'test' } as the event data
		</script>
	</body>
</html>